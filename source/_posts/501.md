---
title: 去不图床网站架构分享
tags:
  - 架构
categories:
  - 运维教程
date: 2022-09-05 00:00:00
---

> 杜老师更新图床架构后，不少小伙伴反馈速度快不少，使用体验较之前提升了很多。也有小伙伴担心图片的稳定性和安全，本篇分享一下去不图床网站架构。

<!-- more -->

## 网站架构

其实没有多么复杂，后端并不是多个服务器，而是多个服务组成：

{% image https://cdn.dusays.com/2022/09/500-1.jpg %}

## 数据走向

1. 当用户访问图床时，会通过前端的多吉云 CDN 国内节点加速，页面获取极限带宽为 100M；

2. 当用户上传图片时，数据需先经过自建服务审核，再通过 FTP 协议传至存储模块；

3. 上传带宽为 500M，理论极限值受审核速度，及 FTP 队列处理速度影响；

4. 存储模块域名独立，通过多吉云 CDN 国内节点加速，提供高速外链服务。

## 参与设备

所用到的设备配置为 16H16G。存储为 512NVMe，带宽上行 100M 下行 700M。

图片文件每一小时同步备份至 NAS，保障数据安全。

## 写在最后

随着图床用户体量增加，原有的服务器已经无法满足运营需求，尽快杜老师做了很多次优化，但因为线路等关系，在大量上传图片时经常出错。

且受节点影响，部分地区的用户出现无法访问等情况。现图床 ICP 备案已下，正式切为国内节点，且服务器配置提升，保障了用户的使用体验。

最后还是要说一下，图床目前使用家用网络，如果出现突发停电、断网等情况则会影响服务稳定性。

杜老师目前住处的电费自动续缴，除线路整修外不会出现突然断电问题「入住一年，就出现了一次，断电了 5 分钟」

目前家中两条带宽，其中一条只跑 NAS 和图床，且 NAS 为双网卡，主要上传下载操作均不会影响到图床带宽。

除图床站点外，杜老师说评论系统、友链的朋友圈、访问统计也运行在该主机上！