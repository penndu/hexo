---
title: é€šè¿‡ Gitea éƒ¨ç½² Hexo æ•™ç¨‹
tags:
  - éƒ¨ç½²
categories:
  - ç½‘ç«™æ­å»º
date: 2024-08-04 00:00:00
---

> åº” Zero ç«¥é´éœ€æ±‚ï¼Œæœè€å¸ˆæ›´æ–°ä¸€ç¯‡é€šè¿‡ Gitea éƒ¨ç½² Hexo çš„æ•™ç¨‹ï¼Œå¯ä»¥å®ç°é€šè¿‡ `git` å‘½ä»¤è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢ï¼Œå¹¶æ”¯æŒ VS Code æˆ–è€…ç½‘é¡µç¼–è¾‘å™¨ç­‰å½¢å¼æ›´æ–°ç«™ç‚¹å†…å®¹ã€‚å…¶éƒ¨ç½²æ€è·¯åŒæ ·é€‚ç”¨äº Hugo ç­‰é™æ€åšå®¢æ¡†æ¶ã€‚

<!-- more -->

## å†™åœ¨å‰é¢

è¿‘å¹´æ¥é™æ€åšå®¢æ¡†æ¶å æ¯”è¶Šæ¥è¶Šé«˜äº†ï¼Œå…¶ä¸€å¤§ç‰¹æ€§æ˜¯å¯ä»¥æ‰˜ç®¡åˆ° Vercel è¿™ç±»çš„å…è´¹å¹³å°ä¸Šï¼Œè¿›ä¸€æ­¥å‡å°‘äº†åšä¸»è¿è¥æˆæœ¬ã€‚

ä½†éšç€å…è´¹çš„èµ„æºè¶Šå‘ç´§ä¿ï¼ŒåŠ ä¸Šè¶Šæ¥è¶Šä¸¥å³»çš„ç½‘ç»œé™åˆ¶ï¼Œå¾ˆå¤šå°ä¼™ä¼´å¼€å§‹å°†ç«™ç‚¹ï¼Œè¿ç§»è‡³å¢ƒå†…å¹³å°ä¸Šã€‚

å¥ˆä½•å¢ƒå†…çš„å…è´¹èµ„æºéå¸¸å°‘ï¼Œå¾ˆå¤šåŠŸèƒ½éœ€è¦è‡ªè¡Œè´­ä¹°ä¸»æœºæ­å»ºï¼Œæ— ç–‘å¢åŠ äº†æˆ‘ä»¬çš„ä½¿ç”¨æˆæœ¬ä»¥åŠå­¦ä¹ æˆæœ¬ã€‚

æœ¬ç¯‡æ•™ç¨‹ä¸»è¦è¯´æ˜å¦‚ä½•é€šè¿‡ Gitea å®ç°ç±»ä¼¼ GitHub Actions é‚£ç§è‡ªåŠ¨éƒ¨ç½²åŠŸèƒ½ï¼Œå®ç°åœ¨ä¸»æœºä¸Šåšå®¢çš„æ›´æ–°å’Œéƒ¨ç½²ã€‚

## å‡†å¤‡å·¥ä½œ

1. éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… Giteaï¼Œå¯ä»¥å‚è€ƒã€Š[ä½¿ç”¨ Docker éƒ¨ç½² Gitea æ–°ä¸€ä»£çš„ä»£ç æ‰˜ç®¡å¹³å°](https://dusays.com/archives/722/)ã€‹ä¸€æ–‡éƒ¨ç½²ï¼›

2. éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… Act Runnerï¼Œå¯ä»¥å‚è€ƒã€Š[ä½¿ç”¨ Docker éƒ¨ç½² Gitea Actions çš„ Runner](https://dusays.com/archives/723/)ã€‹ä¸€æ–‡éƒ¨ç½²ï¼›

3. éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… Hexoï¼Œå¯ä»¥å‚è€ƒã€Š[è¿è¡Œåœ¨äº‘ä¸»æœºçš„ Hexo](https://dusays.com/archives/296/)ã€‹ä¸€æ–‡éƒ¨ç½²ï¼›

4. éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… Web å¼•æ“ï¼Œå¯é€‰é¡¹éå¸¸å¤šï¼Œæœè€å¸ˆä½¿ç”¨ OpenRestyï¼Œè¿™é‡Œä¸å¤šè¯´éƒ¨ç½²æ–¹å¼äº†ã€‚

## éƒ¨ç½²è¿‡ç¨‹

1. æ–°å»ºç«™ç‚¹ç›®å½•ã€‚è¿™é‡Œä»¥ 1Panel é¢æ¿ä¸ºä¾‹ï¼Œæ·»åŠ ä¸€ä¸ªåŸŸåä¸º `dusays.com` ç«™ç‚¹ï¼š

{% image https://cdn.dusays.com/2024/08/734-1.jpg %}

2. ä½¿ç”¨ç»ˆç«¯ç¨‹åºç™»å½•è¯¥æœåŠ¡å™¨ï¼Œå¹¶åˆ‡æ¢åˆ°ç«™ç‚¹ç›®å½•ï¼Œä»¥åˆšåˆšçš„åŸŸåä¸ºä¾‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```
cd /opt/1panel/apps/openresty/openresty/www/sites/dusays.com/index/
```

3. åˆ é™¤ç«™ç‚¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ Hexo åˆ›å»ºç«™ç‚¹æ•°æ®ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```
rm -rf *
hexo init
```

4. åˆ›å»º Act Runner éƒ¨ç½²æ–‡ä»¶`.gitea/workflows/deploy.yml`ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```
name: Gitea Actions Demo
run-name: ${{ gitea.actor }} is testing out Gitea Actions ğŸš€
on: [push]

jobs:
  Explore-Gitea-Actions:
    runs-on: self-hosted
    steps:
      - run: cd /opt/1panel/apps/openresty/openresty/www/sites/dusays.com/index/ && git pull origin main
      - run: cd /opt/1panel/apps/openresty/openresty/www/sites/dusays.com/index/ && hexo generate
```

5. é…ç½® `git` ä¸Šä¼ çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼š

```
git config --global user.name "TeacherDu"
git config --global user.email "teacherdu@dusays.com"
```

6. ç”Ÿæˆ SSH å¯†é’¥å¹¶æ·»åŠ å…¬é’¥åˆ° Giteaï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œç„¶åä¸€ç›´å›è½¦ï¼Œä¼šç”Ÿæˆ `id_rsa` å’Œ `id_rsa.pub`ã€‚å¤åˆ¶ `id_rsa.pub` æ–‡ä»¶çš„å†…å®¹å¹¶ç™»å½• Giteaï¼Œè¿›å…¥ä¸ªäººè®¾ç½®ï¼Œæ·»åŠ åˆ° SSH å…¬é’¥ï¼š

```
ssh-keygen -t rsa
cat ~/.ssh/id_rsa.pub
```

7. åœ¨ Gitea ä¸Šåˆ›å»ºä¸€ä¸ªæ–°ä»“åº“ï¼š

{% image https://cdn.dusays.com/2024/08/734-2.jpg %}

8. æ–°å»º`.gitignore` æ–‡ä»¶é¿å…åŒæ­¥æ˜“å˜åŠ¨æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```
.DS_Store
Thumbs.db
db.json
*.log
node_modules/
public/
.deploy*/
_multiconfig.yml
```

9. æäº¤å¹¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼š

```
git init
git checkout -b main
git add .
git commit -m "first commit"
git remote add origin https://gitea.dusays.com/penn/hexo.git
git push -u origin main
```

10. å°†ç«™ç‚¹çš„è¿è¡Œç›®å½•è®¾ç½®ä¸º `public`ï¼š

{% image https://cdn.dusays.com/2024/08/734-3.jpg %}

## æ³¨æ„äº‹é¡¹

å¯ä»¥ç›´æ¥åœ¨ Gitea ä¿®æ”¹ç«™ç‚¹å†…å®¹ï¼Œæˆ–è€…é€šè¿‡ VS Code ç­‰å·¥å…·æ¥å…¥è¿›è¡Œç¼–è¾‘ã€‚

ä¸è¦ç›´æ¥ä¿®æ”¹æœåŠ¡å™¨ä¸­ç«™ç‚¹æ–‡ä»¶ï¼Œå¦‚æœå‡ºç°å†…å®¹å†²çªå¯¼è‡´æ— æ³•è‡ªåŠ¨éƒ¨ç½²ï¼Œå¯ä»¥ä» Gitea ä¸­é‡æ–°æ‹‰å–æ•°æ®è§£å†³è¯¥é—®é¢˜ã€‚