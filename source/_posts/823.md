---
title: 在银河麒麟桌面操作系统 ARM 版上安装 KVM 虚拟化
tags:
  - 
categories:
  - 
date: 2025-04-27 00:00:00
---

> 随着 ARM 架构的逐渐普及，越来越多的用户开始在 ARM 版的银河麒麟桌面操作系统上探索虚拟化技术。KVM（Kernel-based Virtual Machine）是一种开源的全虚拟化解决方案，能够在 Linux 系统上运行多个操作系统。本文将详细介绍如何在银河麒麟桌面操作系统 ARM 版上安装 KVM 虚拟化环境，帮助用户搭建高效的虚拟化平台。

<!-- more -->

## 一、准备工作

### （一）硬件要求

- 确保你的 ARM 架构设备支持虚拟化技术。通常，支持虚拟化的 ARM 处理器会支持硬件辅助虚拟化功能。

- 系统至少需要 4GB 内存和 20GB 的硬盘空间。

### （二）软件要求

- 银河麒麟桌面操作系统 ARM 版（如 V10）。

- KVM 虚拟化相关的软件包。

## 二、安装 KVM 虚拟化环境

### （一）安装 KVM 和相关工具

在银河麒麟桌面操作系统 ARM 版上，可以通过以下命令安装 KVM 和相关工具：

```Shell
sudo apt-get update
sudo apt-get install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils virt-manager
```


这些包的作用如下：

- `qemu-kvm`：提供 KVM 虚拟化的核心功能。

- `libvirt-daemon-system`：用于管理虚拟机的后端服务。

- `libvirt-clients`：提供客户端工具来管理虚拟机。

- `bridge-utils`：用于配置网络桥接。

- `virt-manager`：提供图形化界面来管理虚拟机。

### （二）添加用户到 `libvirt` 组

为了方便管理虚拟机，需要将当前用户添加到 `libvirt` 组：

```Shell
sudo usermod -aG libvirt $(whoami)
```


然后注销并重新登录，使组成员关系生效。

### （三）验证 KVM 是否安装成功

运行以下命令来检查 KVM 是否正常工作：

```Shell
virsh --version
```


如果返回了版本信息，说明 KVM 安装成功。

## 三、创建虚拟机

### （一）下载虚拟机镜像

可以从银河麒麟官方网站下载适合 ARM 架构的虚拟机镜像文件。例如，下载 `Kylin-Desktop-V10-SP1-General-Release-2303-ARM64.iso` 文件。

### （二）创建虚拟磁盘

使用以下命令创建虚拟磁盘：

```Shell
qemu-img create -f qcow2 /path/to/disk.img 20G
```


其中 `/path/to/disk.img` 是虚拟磁盘的路径，`20G` 表示磁盘大小为 20GB。

### （三）启动虚拟机安装

使用以下命令启动虚拟机安装：

```Shell
qemu-system-aarch64 -m 2048 -cpu cortex-a76 -smp 4 -M virt -bios /path/to/QEMU_EFI.fd -device VGA -device nec-usb-xhci -device usb-mouse -device usb-kbd -drive if=none,file=/path/to/disk.img,id=hd0 -device virtio-blk-device,drive=hd0 -drive if=none,file=/path/to/Kylin-Desktop-V10-SP1-General-Release-2303-ARM64.iso,id=cdrom,media=cdrom -device virtio-scsi-device -device scsi-cd,drive=cdrom
```


- `-m 2048`：分配 2048MB 内存。

- `-cpu cortex-a76`：指定 CPU 类型。

- `-smp 4`：指定虚拟 CPU 核心数。

### （四）完成安装

按照虚拟机安装界面的提示完成安装过程。安装完成后，虚拟机将自动重启。

## 四、使用 KVM 管理虚拟机

### （一）使用 `virsh` 命令行工具

`virsh` 是一个强大的命令行工具，用于管理 KVM 虚拟机。例如：

- 列出所有虚拟机：

  ```Shell
virsh list --all
```


- 启动虚拟机：

  ```Shell
virsh start <虚拟机名称>
```


- 关闭虚拟机：

  ```Shell
virsh shutdown <虚拟机名称>
```


### （二）使用 `virt-manager` 图形化界面

`virt-manager` 提供了一个直观的图形化界面，方便用户管理虚拟机。启动 `virt-manager` 后，可以连接到本地或远程的 KVM 服务器，创建、启动、停止虚拟机。

